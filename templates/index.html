<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ECC Cryptography - Advanced Simulation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Poppins:wght@300;500;600;700&display=swap"
    rel="stylesheet">
  <style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  /* Core Colors */
  --primary: #0a0f1e;
  --secondary: #111827;
  --accent: #00d9ff;
  --accent-alt: #0099ff;
  --text: #ffffff;
  --text-dim: #a0aec0;
  --success: #00ff88;
  --danger: #ff4444;

  /* Premium Gradients */
  --gradient-bg: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #0a0f1e 100%);
  --gradient-accent: linear-gradient(135deg, #00d9ff, #00ff88);
  --gradient-text: linear-gradient(135deg, #ffffff 0%, #00d9ff 50%, #00ff88 100%);

  /* Glassmorphism */
  --glass-bg: rgba(255, 255, 255, 0.03);
  --glass-bg-hover: rgba(255, 255, 255, 0.08);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-blur: blur(16px);

  /* 3D Shadows */
  --shadow-3d: 0 25px 50px rgba(0, 0, 0, 0.5), 0 0 100px rgba(0, 217, 255, 0.1);
  --shadow-3d-hover: 0 35px 70px rgba(0, 0, 0, 0.6), 0 0 120px rgba(0, 217, 255, 0.2);
  --text-shadow-3d: 0 4px 8px rgba(0, 0, 0, 0.4), 0 8px 24px rgba(0, 0, 0, 0.3);

  /* Animation Timings */
  --transition-fast: 0.2s ease;
  --transition-smooth: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: "Poppins", sans-serif;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  background-attachment: fixed;
  color: var(--text);
  line-height: 1.6;
  overflow-x: hidden;
}

#bg-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
}

/* Added background toggle button */
.bg-toggle {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 153, 255, 0.2));
  border: 2px solid var(--accent);
  border-radius: 50%;
  color: var(--accent);
  font-size: 20px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  z-index: 900;
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
}

.bg-toggle:hover {
  transform: scale(1.1) rotate(45deg);
  box-shadow: 0 0 40px rgba(0, 217, 255, 0.6);
  background: linear-gradient(135deg, var(--accent), var(--accent-alt));
  color: var(--primary);
}

.bg-toggle:active {
  transform: scale(0.95) rotate(45deg);
}

/* ============ NAVIGATION ============ */
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 80px;
  backdrop-filter: blur(15px);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 60px;
  z-index: 1000;
  animation: slideDown 0.6s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.logo {
  font-size: 28px;
  font-weight: 800;
  color: var(--accent);
  font-family: "Courier Prime", monospace;
  letter-spacing: 3px;
  text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
  animation: glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse {

  0%,
  100% {
    text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
  }

  50% {
    text-shadow: 0 0 40px rgba(0, 217, 255, 0.8);
  }
}

.nav-menu {
  display: flex;
  gap: 50px;
}

.nav-link {
  color: var(--text-dim);
  text-decoration: none;
  font-weight: 600;
  font-size: 11px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  cursor: pointer;
}

.nav-link:hover,
.nav-link.active {
  color: var(--accent);
  text-shadow: 0 0 15px rgba(0, 217, 255, 0.6);
}

.nav-link::after {
  content: "";
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--accent);
  transition: width 0.3s ease;
}

.nav-link:hover::after,
.nav-link.active::after {
  width: 100%;
}

/* ============ PAGE SECTIONS ============ */
.page {
  display: none;
  opacity: 0;
  transition: opacity 0.7s ease;
  position: relative;
  z-index: 1;
  min-height: 100vh;
  padding-top: 100px;
  background: var(--gradient-bg);
  animation: fadeIn 0.7s ease;
}

/* Particle Background for All Pages */
.page::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(2px 2px at 15% 25%, rgba(0, 217, 255, 0.3), transparent),
    radial-gradient(2px 2px at 45% 65%, rgba(0, 255, 136, 0.2), transparent),
    radial-gradient(2px 2px at 75% 35%, rgba(255, 255, 255, 0.2), transparent),
    radial-gradient(3px 3px at 85% 75%, rgba(0, 217, 255, 0.4), transparent),
    radial-gradient(2px 2px at 25% 85%, rgba(0, 153, 255, 0.3), transparent);
  background-size: 200% 200%;
  animation: gradientShift 20s ease infinite;
  pointer-events: none;
  z-index: 0;
}

/* Glow Effect Layer */
.page::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(0, 217, 255, 0.08) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(0, 255, 136, 0.06) 0%, transparent 40%);
  animation: float 10s ease-in-out infinite;
  pointer-events: none;
  z-index: 0;
}

.page.active {
  display: block;
  opacity: 1;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============ PREMIUM HERO SECTION ============ */

/* Keyframe Animations */
@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float {

  0%,
  100% {
    transform: translateY(0px) rotate(0deg);
  }

  50% {
    transform: translateY(-20px) rotate(2deg);
  }
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }

  10% {
    opacity: 1;
  }

  90% {
    opacity: 1;
  }

  100% {
    transform: translateY(-100vh) rotate(720deg);
    opacity: 0;
  }
}

@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

@keyframes pulse3D {

  0%,
  100% {
    transform: perspective(1000px) rotateX(2deg) scale(1);
  }

  50% {
    transform: perspective(1000px) rotateX(-2deg) scale(1.02);
  }
}

/* Hero Container - Full Viewport */
.hero-container {
  width: 100%;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  background: var(--gradient-bg);
  padding: 0 20px;
}

/* Animated Particle Background */
.hero-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(0, 217, 255, 0.4), transparent),
    radial-gradient(2px 2px at 40% 70%, rgba(0, 255, 136, 0.3), transparent),
    radial-gradient(2px 2px at 60% 20%, rgba(255, 255, 255, 0.3), transparent),
    radial-gradient(3px 3px at 80% 60%, rgba(0, 217, 255, 0.5), transparent),
    radial-gradient(2px 2px at 10% 80%, rgba(0, 153, 255, 0.4), transparent),
    radial-gradient(3px 3px at 90% 40%, rgba(0, 255, 136, 0.3), transparent);
  background-size: 200% 200%;
  animation: gradientShift 15s ease infinite;
  pointer-events: none;
  z-index: 1;
}

/* Floating Particles Layer */
.hero-container::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    radial-gradient(circle at 25% 25%, rgba(0, 217, 255, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(0, 255, 136, 0.1) 0%, transparent 50%);
  animation: float 8s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}

/* 3D Canvas Wrapper - Behind Content */
.hero-canvas-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  opacity: 0.7;
}

/* Centered Hero Content */
.hero-content {
  position: relative;
  z-index: 10;
  text-align: center;
  max-width: 900px;
  padding: 40px;
  animation: fadeUp 1s ease forwards;
}

/* 3D Title with Gradient Text */
.hero-title {
  font-size: clamp(48px, 10vw, 90px);
  font-weight: 900;
  margin-bottom: 24px;
  background: var(--gradient-text);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-family: "Poppins", sans-serif;
  line-height: 1.1;
  letter-spacing: -3px;
  text-shadow: var(--text-shadow-3d);
  transform: perspective(1000px) rotateX(3deg);
  animation: fadeUp 1s ease forwards, pulse3D 6s ease-in-out infinite;
}

/* Subtitle */
.hero-subtitle {
  font-size: clamp(16px, 2.5vw, 22px);
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 40px;
  font-weight: 300;
  line-height: 1.8;
  letter-spacing: 0.5px;
  animation: fadeUp 1s ease 0.2s forwards;
  opacity: 0;
}

/* Glassmorphism CTA Button */
.btn-hero {
  position: relative;
  padding: 20px 50px;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  color: var(--accent);
  border: 1px solid var(--glass-border);
  border-radius: 50px;
  font-weight: 700;
  font-size: 14px;
  letter-spacing: 3px;
  text-transform: uppercase;
  cursor: pointer;
  transition: var(--transition-smooth);
  box-shadow: var(--shadow-3d);
  overflow: hidden;
  animation: fadeUp 1s ease 0.4s forwards;
  opacity: 0;
}

/* Button Hover Sheen Effect */
.btn-hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: 0.5s;
}

.btn-hero:hover::before {
  left: 100%;
}

.btn-hero:hover {
  background: var(--glass-bg-hover);
  border-color: var(--accent);
  box-shadow: var(--shadow-3d-hover);
  transform: translateY(-5px) scale(1.05);
  color: #fff;
}

/* Focus State for Accessibility */
.btn-hero:focus {
  outline: 2px solid var(--accent);
  outline-offset: 4px;
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {

  .hero-title,
  .hero-subtitle,
  .btn-hero {
    animation: none;
    opacity: 1;
  }

  .hero-container::before,
  .hero-container::after {
    animation: none;
  }
}

#hero-curve {
  filter: drop-shadow(0 0 50px rgba(0, 217, 255, 0.5));
  max-width: 100%;
  height: auto;
}

/* ============ CONTAINER ============ */
.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 60px 30px;
  position: relative;
  z-index: 1;
}

.section-title {
  font-size: clamp(36px, 6vw, 55px);
  font-weight: 900;
  margin-bottom: 50px;
  background: var(--gradient-text);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-family: "Poppins", sans-serif;
  text-align: center;
  letter-spacing: -2px;
  text-shadow: var(--text-shadow-3d);
  transform: perspective(500px) rotateX(3deg);
  animation: fadeUp 0.9s ease;
}

.section-subtitle {
  text-align: center;
  color: var(--text-dim);
  margin-bottom: 40px;
  font-size: 1.2rem;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.6;
  animation: fadeUp 1s ease;
}

/* ============ ENCRYPTION WORKFLOW ============ */
.encrypt-workflow {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 35px;
  margin-bottom: 80px;
}

/* ============ ENHANCED BUTTONS ============ */
.btn-primary,
.btn-hero {
  position: relative;
  overflow: hidden;
  z-index: 1;
}

.btn-primary::before,
.btn-hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: 0.5s;
  z-index: -1;
}

.btn-primary:hover::before,
.btn-hero:hover::before {
  left: 100%;
}

.btn-primary:hover,
.btn-hero:hover {
  transform: translateY(-4px) scale(1.03);
  box-shadow: 0 10px 40px rgba(0, 217, 255, 0.5);
  filter: brightness(1.2);
}

/* ============ PREMIUM WORKFLOW PANELS ============ */
.workflow-panel {
  position: relative;
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 28px;
  padding: 45px 35px;
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transform: perspective(800px) rotateY(-5deg) rotateX(3deg) translateZ(0);
  overflow: hidden;
  box-shadow:
    0 25px 50px rgba(0, 0, 0, 0.35),
    0 0 60px rgba(0, 217, 255, 0.03),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Animated Gradient Border */
.workflow-panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.4s ease;
}

.workflow-panel:hover {
  transform: perspective(800px) rotateY(0deg) rotateX(0deg) translateY(-12px) scale(1.05);
  background: rgba(255, 255, 255, 0.07);
  border-color: rgba(0, 217, 255, 0.35);
  box-shadow:
    0 35px 70px rgba(0, 0, 0, 0.45),
    0 0 100px rgba(0, 217, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.workflow-panel:hover::before {
  transform: scaleX(1);
}

/* Animated Gradient Border */
.workflow-panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.4s ease;
}

.workflow-panel:hover {
  transform: perspective(1000px) rotateY(0deg) rotateX(0deg) scale(1.03);
  background: var(--glass-bg-hover);
  border-color: rgba(0, 217, 255, 0.3);
  box-shadow: var(--shadow-3d-hover);
}

.workflow-panel:hover::before {
  transform: scaleX(1);
}

.workflow-panel:hover .step-badge {
  background: var(--accent);
  color: var(--primary);
  box-shadow: 0 0 25px var(--accent);
  transform: rotate(360deg) scale(1.1);
}

.step-badge {
  background: rgba(0, 217, 255, 0.15);
  color: var(--accent);
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: 800;
  border: 2px solid var(--accent);
  font-size: 18px;
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
  transition: 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 18px;
  border-bottom: 1px solid var(--glass-border);
}

.panel-header h3 {
  font-size: 18px;
  background: var(--gradient-text);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.panel-desc {
  color: rgba(255, 255, 255, 0.7);
  font-size: 14px;
  margin-bottom: 25px;
  line-height: 1.6;
}

/* ============ INPUT GLOW ============ */
.text-input:focus,
.text-output:focus {
  outline: none;
  border-color: var(--accent);
  background: rgba(10, 15, 30, 0.95);
  box-shadow: 0 0 25px rgba(0, 217, 255, 0.3), inset 0 0 10px rgba(0, 217, 255, 0.1);
  transform: translateY(-2px);
}

/* ============ KEYS DISPLAY ============ */
.keys-display {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 24px;
  margin-top: 15px;
}

.key-item {
  margin-bottom: 18px;
}

.key-item:last-child {
  margin-bottom: 0;
}

.key-item label {
  display: block;
  background: var(--gradient-text);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 11px;
  font-weight: 700;
  margin-bottom: 10px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
}

.key-value {
  background: rgba(0, 217, 255, 0.03);
  border: 1px solid var(--glass-border);
  padding: 14px;
  border-radius: 10px;
  font-family: "Courier New", monospace;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.8);
  word-break: break-all;
  line-height: 1.7;
  transition: var(--transition-smooth);
}

.key-generated .key-value {
  background: rgba(0, 255, 136, 0.12);
  border-color: var(--success);
  color: var(--success);
  box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
  animation: keyReveal 0.6s ease;
}

@keyframes keyReveal {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ============ TEXT AREAS ============ */
.text-input,
.text-output {
  width: 100%;
  min-height: 110px;
  padding: 15px;
  background: rgba(10, 15, 30, 0.85);
  border: 2px solid rgba(0, 217, 255, 0.1);
  border-radius: 10px;
  color: var(--text);
  font-family: "Courier Prime", monospace;
  font-size: 12px;
  resize: vertical;
  transition: all 0.4s ease;
  margin-bottom: 12px;
}

.text-input:focus,
.text-output:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 30px rgba(0, 217, 255, 0.25);
  background: rgba(10, 15, 30, 0.98);
}

.text-output {
  background: rgba(10, 15, 30, 0.65);
  color: var(--text-dim);
}

.text-output.result-shown {
  background: rgba(0, 255, 136, 0.08);
  border-color: var(--success);
  color: var(--success);
  animation: slideInUp 0.6s ease;
}

.result-label {
  display: block;
  color: var(--accent);
  font-size: 11px;
  font-weight: 800;
  margin: 18px 0 10px 0;
  letter-spacing: 1.5px;
  text-transform: uppercase;
}

/* ============ ANIMATION SECTION ============ */
.animation-section {
  background: rgba(20, 25, 45, 0.5);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 18px;
  padding: 50px;
  margin-top: 100px;
  animation: fadeInUp 1s ease;
}

.animation-title {
  font-size: 28px;
  color: var(--accent);
  margin-bottom: 30px;
  text-align: center;
  font-family: "Courier Prime", monospace;
  font-weight: 800;
  letter-spacing: 1px;
}

#encryption-canvas,
#decryption-canvas {
  width: 100%;
  height: 400px;
  background: rgba(10, 15, 30, 0.9);
  border-radius: 12px;
  display: block;
  margin-bottom: 30px;
  border: 1px solid rgba(0, 217, 255, 0.1);
}

.animation-steps {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.step-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 20px;
  background: rgba(0, 217, 255, 0.08);
  border: 1px solid rgba(0, 217, 255, 0.2);
  border-radius: 12px;
  animation: slideInUp 0.5s ease backwards;
  transition: all 0.3s ease;
}

.step-item:nth-child(1) {
  animation-delay: 0s;
}

.step-item:nth-child(2) {
  animation-delay: 0.1s;
}

.step-item:nth-child(3) {
  animation-delay: 0.2s;
}

.step-item:nth-child(4) {
  animation-delay: 0.3s;
}

.step-item:nth-child(5) {
  animation-delay: 0.4s;
}

.step-item:hover {
  background: rgba(0, 217, 255, 0.15);
  border-color: var(--accent);
  transform: translateY(-5px);
}

.step-dot {
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, var(--accent), var(--accent-alt));
  color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: 900;
  font-size: 18px;
  box-shadow: 0 0 25px rgba(0, 217, 255, 0.4);
  animation: dotPulse 1.5s ease-in-out infinite;
}

@keyframes dotPulse {

  0%,
  100% {
    box-shadow: 0 0 25px rgba(0, 217, 255, 0.4);
  }

  50% {
    box-shadow: 0 0 50px rgba(0, 217, 255, 0.8);
  }
}

.step-text {
  color: var(--text-dim);
  font-size: 12px;
  text-align: center;
  font-family: "Courier Prime", monospace;
  line-height: 1.6;
}

/* ============ SIMULATION PAGE ============ */
.simulation-subtitle {
  color: var(--text-dim);
  text-align: center;
  font-size: 16px;
  margin-bottom: 50px;
  margin-top: -40px;
  animation: fadeInUp 0.8s ease;
}

.simulation-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin-bottom: 30px;
  flex-wrap: wrap;
  padding: 25px;
  background: rgba(20, 25, 45, 0.6);
  border-radius: 15px;
  border: 1px solid rgba(0, 217, 255, 0.15);
  animation: fadeInDown 0.8s ease;
}

.control-btn {
  padding: 12px 22px;
  background: rgba(0, 217, 255, 0.15);
  border: 2px solid rgba(0, 217, 255, 0.4);
  color: var(--accent);
  border-radius: 10px;
  font-family: "Courier Prime", monospace;
  font-weight: 700;
  font-size: 11px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap;
}

.control-btn:hover {
  background: rgba(0, 217, 255, 0.3);
  border-color: var(--accent);
  transform: translateY(-3px);
  box-shadow: 0 0 30px rgba(0, 217, 255, 0.3);
}

.control-btn.play-btn.playing {
  background: rgba(0, 255, 136, 0.2);
  border-color: var(--success);
  color: var(--success);
}

.control-btn.reset-btn:hover {
  background: rgba(255, 150, 100, 0.2);
  border-color: rgba(255, 150, 100, 0.8);
  color: rgba(255, 150, 100, 0.9);
}

.control-icon {
  font-size: 14px;
}

.step-counter {
  padding: 10px 20px;
  background: rgba(0, 217, 255, 0.1);
  border-radius: 8px;
  font-family: "Courier Prime", monospace;
  font-size: 12px;
  color: var(--accent);
  font-weight: 700;
  border: 1px solid rgba(0, 217, 255, 0.2);
}

.simulation-workspace {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 40px;
  margin-bottom: 30px;
  animation: fadeInUp 1s ease;
}

.sim-canvas-container {
  background: rgba(20, 25, 45, 0.7);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 18px;
  padding: 30px;
  display: flex;
  flex-direction: column;
}

.sim-section-title {
  color: var(--accent);
  font-family: "Courier Prime", monospace;
  font-size: 14px;
  font-weight: 800;
  margin-bottom: 20px;
  letter-spacing: 1px;
}

.simulation-canvas {
  width: 100%;
  height: 500px;
  background: rgba(10, 15, 30, 0.9);
  border-radius: 12px;
  border: 1px solid rgba(0, 217, 255, 0.1);
  margin-bottom: 20px;
  cursor: crosshair;
}

.curve-legend {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--text-dim);
  font-family: "Courier Prime", monospace;
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block;
  box-shadow: 0 0 10px currentColor;
}

.sim-info-container {
  display: flex;
  flex-direction: column;
  gap: 25px;
}

.sim-selector {
  background: rgba(20, 25, 45, 0.7);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 15px;
  padding: 22px;
  animation: fadeInUp 0.9s ease;
}

.sim-selector label {
  display: block;
  color: var(--accent);
  font-size: 12px;
  font-weight: 800;
  margin-bottom: 12px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
}

.operation-select {
  width: 100%;
  padding: 12px 15px;
  background: rgba(10, 15, 30, 0.8);
  color: var(--text);
  border: 2px solid rgba(0, 217, 255, 0.2);
  border-radius: 10px;
  font-family: "Courier Prime", monospace;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.operation-select:hover,
.operation-select:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
}

.sim-equations {
  background: rgba(20, 25, 45, 0.7);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 15px;
  padding: 22px;
  animation: fadeInUp 1s ease;
}

.sim-equations h4 {
  color: var(--accent);
  font-family: "Courier Prime", monospace;
  font-size: 12px;
  font-weight: 800;
  margin-bottom: 15px;
  letter-spacing: 1px;
  text-transform: uppercase;
}

.equations-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Enhanced equation item styling with glow on active */
.equation-item {
  background: rgba(0, 217, 255, 0.08);
  border-left: 3px solid rgba(0, 217, 255, 0.4);
  padding: 12px;
  border-radius: 6px;
  font-family: "Courier Prime", monospace;
  font-size: 11px;
  color: var(--text-dim);
  line-height: 1.6;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.equation-item.active {
  background: rgba(0, 217, 255, 0.25);
  border-left-color: var(--accent);
  color: var(--text);
  transform: translateX(8px);
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.3), inset 0 0 15px rgba(0, 217, 255, 0.1);
}

.sim-description {
  background: rgba(20, 25, 45, 0.7);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 15px;
  padding: 22px;
  animation: fadeInUp 1.1s ease;
}

.sim-description h4 {
  color: var(--accent);
  font-family: "Courier Prime", monospace;
  font-size: 12px;
  font-weight: 800;
  margin-bottom: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
}

/* Enhanced description text styling for typewriter effect */
.description-text {
  color: var(--text-dim);
  font-size: 13px;
  line-height: 1.7;
  min-height: 60px;
  font-family: "Courier Prime", monospace;
  letter-spacing: 0.5px;
  animation: fadeInUp 0.6s ease;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.sim-coords {
  background: rgba(20, 25, 45, 0.7);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 15px;
  padding: 22px;
  animation: fadeInUp 1.2s ease;
}

.sim-coords h4 {
  color: var(--accent);
  font-family: "Courier Prime", monospace;
  font-size: 12px;
  font-weight: 800;
  margin-bottom: 15px;
  letter-spacing: 1px;
  text-transform: uppercase;
}

.coords-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

.coord-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: rgba(0, 217, 255, 0.08);
  border-radius: 8px;
  font-family: "Courier Prime", monospace;
  border: 1px solid rgba(0, 217, 255, 0.15);
}

.coord-item label {
  color: var(--accent);
  font-weight: 800;
  font-size: 11px;
}

.coord-value {
  color: var(--text-dim);
  font-size: 11px;
  font-weight: 700;
  max-width: 150px;
  text-align: right;
  word-break: break-all;
}

.simulation-details {
  background: rgba(20, 25, 45, 0.6);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 18px;
  padding: 35px;
  margin-top: 80px;
  animation: fadeInUp 1.3s ease;
}

.simulation-details h3 {
  color: var(--accent);
  font-family: "Courier Prime", monospace;
  font-size: 16px;
  font-weight: 800;
  margin-bottom: 25px;
  letter-spacing: 1px;
}

.computation-log {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 400px;
  overflow-y: auto;
}

/* Enhanced log entry styling for smooth reveal */
.log-entry {
  background: rgba(0, 217, 255, 0.08);
  border-left: 3px solid rgba(0, 217, 255, 0.3);
  padding: 12px 15px;
  border-radius: 8px;
  font-family: "Courier Prime", monospace;
  font-size: 11px;
  color: var(--text-dim);
  line-height: 1.5;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.log-entry.active {
  background: rgba(0, 217, 255, 0.15);
  border-left-color: var(--accent);
  color: var(--text);
  transform: translateX(6px);
  box-shadow: 0 0 15px rgba(0, 217, 255, 0.2);
}

.log-entry span.highlight {
  color: var(--accent);
  font-weight: 800;
  text-shadow: 0 0 10px rgba(0, 217, 255, 0.4);
}

/* Scrollbar styling */
.computation-log::-webkit-scrollbar {
  width: 8px;
}

.computation-log::-webkit-scrollbar-track {
  background: rgba(0, 217, 255, 0.05);
  border-radius: 10px;
}

.computation-log::-webkit-scrollbar-thumb {
  background: rgba(0, 217, 255, 0.3);
  border-radius: 10px;
}

.computation-log::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 217, 255, 0.5);
}

/* ============ RESOURCES PAGE ============ */
/* Added filter and search controls */
.resource-controls {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 50px;
  animation: fadeInDown 0.9s ease;
}

.resource-search {
  padding: 15px 25px;
  background: rgba(10, 15, 30, 0.85);
  border: 2px solid rgba(0, 217, 255, 0.2);
  border-radius: 12px;
  color: var(--text);
  font-family: "Poppins", sans-serif;
  font-size: 14px;
  transition: all 0.3s ease;
}

.resource-search:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 30px rgba(0, 217, 255, 0.25);
  background: rgba(10, 15, 30, 0.95);
}

.resource-search::placeholder {
  color: var(--text-dim);
}

.resource-filters {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 10px 20px;
  background: rgba(0, 217, 255, 0.1);
  border: 1px solid rgba(0, 217, 255, 0.3);
  color: var(--text-dim);
  border-radius: 25px;
  cursor: pointer;
  font-weight: 600;
  font-size: 12px;
  letter-spacing: 1px;
  transition: all 0.3s ease;
  text-transform: uppercase;
}

.filter-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.filter-btn.active {
  background: linear-gradient(135deg, var(--accent), var(--accent-alt));
  border-color: var(--accent);
  color: var(--primary);
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
}

.resources-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 35px;
  margin-bottom: 60px;
}

.resource-card {
  background: rgba(20, 25, 45, 0.7);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(0, 217, 255, 0.15);
  border-radius: 18px;
  padding: 40px;
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  animation: fadeInUp 0.8s ease backwards;
}

.resource-card:nth-child(1) {
  animation-delay: 0.1s;
}

.resource-card:nth-child(2) {
  animation-delay: 0.2s;
}

.resource-card:nth-child(3) {
  animation-delay: 0.3s;
}

.resource-card:nth-child(4) {
  animation-delay: 0.1s;
}

.resource-card:nth-child(5) {
  animation-delay: 0.2s;
}

.resource-card:nth-child(6) {
  animation-delay: 0.3s;
}

.resource-card:hover {
  border-color: var(--accent);
  box-shadow: 0 0 50px rgba(0, 217, 255, 0.25);
  transform: translateY(-8px);
  background: rgba(20, 25, 45, 0.95);
}

.resource-card.hidden {
  display: none;
}

.resource-icon {
  font-size: 48px;
  margin-bottom: 18px;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-10px);
  }
}

.resource-card h3 {
  color: var(--accent);
  font-size: 20px;
  margin-bottom: 15px;
  font-family: "Courier Prime", monospace;
  font-weight: 800;
}

.resource-card p {
  color: var(--text-dim);
  font-size: 14px;
  line-height: 1.7;
  margin-bottom: 18px;
}

.resource-card ul {
  list-style: none;
  padding: 0;
}

.resource-card li {
  color: var(--text-dim);
  font-size: 13px;
  padding: 8px 0;
  padding-left: 20px;
  position: relative;
  font-family: "Courier Prime", monospace;
}

.resource-card li::before {
  content: "›";
  position: absolute;
  left: 0;
  color: var(--accent);
  font-weight: 800;
}

/* ============ PREMIUM TEAM SECTION ============ */

/* Section Title with 3D Effect */
.team-section-title {
  text-align: center;
  font-size: clamp(32px, 5vw, 48px);
  font-weight: 900;
  margin-bottom: 60px;
  background: var(--gradient-text);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: var(--text-shadow-3d);
  transform: perspective(500px) rotateX(5deg);
}

/* Responsive Grid */
.team-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 40px;
  margin-bottom: 80px;
  perspective: 1000px;
}

/* 3D Glassmorphism Card - Enhanced */
.team-card {
  position: relative;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 28px;
  padding: 50px 35px;
  text-align: center;
  transform: perspective(800px) rotateY(-8deg) rotateX(4deg) translateZ(0);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  animation: fadeUp 0.8s ease backwards;
  overflow: hidden;
  box-shadow:
    0 30px 60px rgba(0, 0, 0, 0.4),
    0 0 80px rgba(0, 217, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Animation Delays for Stagger Effect */
.team-card:nth-child(1) {
  animation-delay: 0.1s;
}

.team-card:nth-child(2) {
  animation-delay: 0.2s;
}

.team-card:nth-child(3) {
  animation-delay: 0.3s;
}

.team-card:nth-child(4) {
  animation-delay: 0.4s;
}

.team-card:nth-child(5) {
  animation-delay: 0.5s;
}

/* Animated Gradient Border */
.team-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-accent);
  background-size: 200% 100%;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.4s ease;
}

/* Card Hover Effect - Stronger 3D */
.team-card:hover {
  transform: perspective(800px) rotateY(0deg) rotateX(0deg) translateY(-15px) scale(1.08);
  box-shadow:
    0 40px 80px rgba(0, 0, 0, 0.5),
    0 0 100px rgba(0, 217, 255, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(0, 217, 255, 0.4);
}

.team-card:hover::before {
  transform: scaleX(1);
}

/* Focus State for Accessibility */
.team-card:focus-within {
  outline: 2px solid var(--accent);
  outline-offset: 4px;
}

/* Circular Avatar Placeholder - Larger */
.team-avatar {
  width: 120px;
  height: 120px;
  margin: 0 auto 25px;
  border-radius: 50%;
  background: var(--gradient-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  font-weight: 800;
  color: var(--primary);
  box-shadow:
    0 15px 40px rgba(0, 217, 255, 0.4),
    0 0 60px rgba(0, 217, 255, 0.2),
    inset 0 -5px 20px rgba(0, 0, 0, 0.2);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transform: translateZ(20px);
}

.team-card:hover .team-avatar {
  transform: translateY(-10px) scale(1.15) rotateZ(5deg);
  box-shadow:
    0 25px 60px rgba(0, 217, 255, 0.5),
    0 0 100px rgba(0, 217, 255, 0.3);
}

/* Name with Gradient - Larger */
.team-name {
  font-size: 26px;
  font-weight: 800;
  margin-bottom: 0;
  background: var(--gradient-text);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.5px;
}

/* Role Badge */
.team-role {
  display: inline-block;
  padding: 6px 16px;
  background: rgba(0, 217, 255, 0.1);
  border: 1px solid rgba(0, 217, 255, 0.2);
  border-radius: 50px;
  color: var(--accent);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  margin-bottom: 16px;
}

/* Bio Text */
.team-desc {
  color: rgba(255, 255, 255, 0.7);
  font-size: 14px;
  line-height: 1.7;
}

/* Mission Glassmorphism Panel */
.team-mission {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: 24px;
  padding: 60px 40px;
  text-align: center;
  animation: fadeUp 1s ease;
}

.team-mission h2 {
  font-size: clamp(24px, 4vw, 36px);
  margin-bottom: 20px;
  background: var(--gradient-text);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.team-mission p {
  color: rgba(255, 255, 255, 0.8);
  font-size: 16px;
  line-height: 1.8;
  max-width: 700px;
  margin: 0 auto;
}

/* Reduced Motion for Accessibility */
@media (prefers-reduced-motion: reduce) {
  .team-card {
    animation: none;
    transform: none;
  }

  .team-card:hover {
    transform: scale(1.02);
  }
}

/* ============ RESET ============ */
.reset-section {
  display: flex;
  justify-content: center;
  margin-top: 80px;
  padding: 40px 0;
  animation: fadeInUp 1.2s ease;
}

.btn-reset {
  padding: 18px 50px;
  background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(0, 153, 255, 0.2));
  color: var(--accent);
  border: 2px solid var(--accent);
  border-radius: 12px;
  font-weight: 800;
  font-size: 12px;
  letter-spacing: 2px;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 0 30px rgba(0, 217, 255, 0.2);
  font-family: "Courier Prime", monospace;
  display: flex;
  align-items: center;
  gap: 12px;
}

.btn-reset:hover {
  background: linear-gradient(135deg, var(--accent), var(--accent-alt));
  color: var(--primary);
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 0 60px rgba(0, 217, 255, 0.6);
}

.btn-reset:active {
  transform: translateY(-2px) scale(1.02);
}

.reset-icon {
  font-size: 16px;
  display: inline-block;
  transition: transform 0.4s ease;
}

.btn-reset:hover .reset-icon {
  transform: rotate(180deg);
}

.reset-notification {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: linear-gradient(135deg, var(--success), rgba(0, 255, 136, 0.8));
  color: var(--primary);
  padding: 18px 35px;
  border-radius: 12px;
  font-weight: 800;
  font-size: 12px;
  letter-spacing: 1px;
  z-index: 2000;
  opacity: 0;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 10px 40px rgba(0, 255, 136, 0.3);
  font-family: "Courier Prime", monospace;
}

.reset-notification.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* ============ ANIMATIONS ============ */
/* Add slideInLeft animation for typewriter and sequential reveals */
@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

/* ============ RESPONSIVE ============ */
@media (max-width: 1200px) {
  .simulation-workspace {
    grid-template-columns: 1fr;
  }

  .simulation-canvas {
    height: 400px;
  }
}

@media (max-width: 1024px) {
  .encrypt-workflow {
    grid-template-columns: 1fr;
  }

  .hero-title {
    font-size: 54px;
  }

  .section-title {
    font-size: 48px;
  }
}

@media (max-width: 768px) {
  .navbar {
    padding: 0 20px;
    height: 70px;
  }

  .nav-menu {
    gap: 20px;
  }

  .nav-link {
    font-size: 9px;
  }

  .hero-container {
    flex-direction: column;
    padding: 100px 20px;
    gap: 30px;
  }

  .hero-title {
    font-size: 42px;
  }

  .container {
    padding: 50px 20px;
  }

  .section-title {
    font-size: 36px;
    margin-bottom: 50px;
  }

  .workflow-panel,
  .resource-card,
  .team-card {
    padding: 25px;
  }

  .animation-section {
    padding: 30px;
  }

  #encryption-canvas,
  #decryption-canvas {
    height: 300px;
  }

  .bg-toggle {
    width: 40px;
    height: 40px;
    font-size: 16px;
    bottom: 20px;
    right: 20px;
  }

  .resource-filters {
    flex-direction: column;
  }

  .filter-btn {
    width: 100%;
  }

  /* Responsive Simulation */
  .simulation-controls {
    flex-direction: column;
  }

  .control-btn {
    width: 100%;
    justify-content: center;
  }

  .sim-canvas-container,
  .sim-info-container {
    padding: 20px;
  }

  .simulation-canvas {
    height: 300px;
  }

  .simulation-details {
    padding: 20px;
  }

  .computation-log {
    max-height: 300px;
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  #bg-canvas {
    display: none;
  }
}

/* ============ 3D VISUALIZATION CONTAINERS ============ */
.sim-canvas-container {
  background: rgba(10, 15, 30, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(0, 217, 255, 0.1);
  border-radius: 20px;
  overflow: hidden;
  position: relative;
  box-shadow: var(--shadow-3d);
  transition: transform 0.5s ease, box-shadow 0.5s ease;
}

.sim-canvas-container:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-3d-hover);
  border-color: rgba(0, 217, 255, 0.3);
}

/* Ensure canvas takes full size of container */
.sim-canvas-container canvas {
  width: 100% !important;
  height: 100% !important;
  display: block;
  outline: none;
}

.sim-section-title {
  position: absolute;
  top: 20px;
  left: 30px;
  z-index: 10;
  color: #fff;
  font-size: 18px;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  pointer-events: none;
  background: rgba(0, 0, 0, 0.3);
  padding: 5px 15px;
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}


/* ============ 3D LABELS ============ */
.scene-label {
  font-family: 'Poppins', sans-serif;
  font-weight: 500;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  transition: opacity 0.3s ease, left 0.1s linear, top 0.1s linear;
  backdrop-filter: blur(4px);
  z-index: 100;
  white-space: nowrap;
}

/* Resources Page Styles */
.resources-tabs {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 40px;
  flex-wrap: wrap;
}

.tab-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  color: var(--text-dim);
  padding: 10px 20px;
  border-radius: 30px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Poppins", sans-serif;
  font-size: 14px;
  backdrop-filter: blur(5px);
}

.tab-btn:hover, .tab-btn.active {
  background: var(--accent);
  color: var(--primary);
  box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
  transform: translateY(-2px);
}

.resources-content {
  display: none;
  animation: fadeIn 0.5s ease;
}

.resources-content.active {
  display: block;
}

.resource-card {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 25px;
  margin-bottom: 20px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.resource-card:hover {
  background: var(--glass-bg-hover);
  border-color: var(--accent);
  transform: translateY(-5px);
  box-shadow: var(--shadow-3d-hover);
}

.resource-card h3 {
  color: var(--accent);
  margin-bottom: 10px;
  font-size: 1.2rem;
}

.resource-card p {
  color: var(--text-dim);
  margin-bottom: 15px;
  font-size: 0.95rem;
}

.resource-link {
  display: inline-block;
  color: var(--text);
  text-decoration: none;
  font-weight: 600;
  font-size: 0.9rem;
  border-bottom: 1px solid var(--accent);
  padding-bottom: 2px;
  transition: all 0.2s ease;
}

.resource-link:hover {
  color: var(--accent);
  border-bottom-color: transparent;
}

.resource-tag {
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(0, 217, 255, 0.1);
  color: var(--accent);
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
}
</style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
  <!-- Enhanced animated background with toggle -->
  <canvas id="bg-canvas"></canvas>
  <button id="bg-toggle" class="bg-toggle" title="Toggle background animation">✦</button>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="logo">ECC</div>
    <div class="nav-menu">
      <a href="#" onclick="showPage('home')" class="nav-link active">HOME</a>
      <a href="#" onclick="showPage('learn')" class="nav-link">LEARN ECC</a>
      <a href="#" onclick="showPage('keygen')" class="nav-link">KEY GENERATION</a>
      <a href="#" onclick="showPage('encrypt')" class="nav-link">ENCRYPTION</a>
      <a href="#" onclick="showPage('decrypt')" class="nav-link">DECRYPTION</a>
      <a href="#" onclick="showPage('resources')" class="nav-link">RESOURCES</a>
      <a href="#" onclick="showPage('team')" class="nav-link">TEAM</a>
    </div>
  </nav>

  <!-- HOME PAGE -->
  <section id="home" class="page active">
    <div class="hero-container">
      <div class="hero-content">
        <h1 class="hero-title">Elliptic Curve<br>Cryptography</h1>
        <p class="hero-subtitle">Experience secure encryption with advanced mathematical visualization</p>
        <button class="btn-hero" onclick="showPage('learn')">Start</button>
      </div>
      <div class="hero-canvas-wrapper" id="hero-3d-container">
        <!-- Three.js will inject canvas here -->
      </div>
    </div>
  </section>

  <!-- LEARNING PAGE -->
  <section id="learn" class="page">
    <div class="container">
      <h1 class="section-title">What is ECC?</h1>

      <!-- Video Section -->
      <div class="video-container"
        style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-bottom: 50px;">

        <iframe
          src="https://www.youtube.com/embed/LbIaGFCuvx0"
          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 16px;"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>

      </div>


      <div class="learn-grid"
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-bottom: 60px;">
        <div class="workflow-panel">
          <div class="panel-header">
            <h3>The Trapdoor Function</h3>
          </div>
          <p class="panel-desc">Imagine mixing two paint colors. It's easy to mix Blue + Yellow to get Green, but
            impossible to separate Green back into exactly Blue and Yellow. This is a <strong>Trapdoor
              Function</strong>: easy one way, hard the other.</p>
          <div class="visual-analogy"
            style="height: 150px; background: rgba(0,0,0,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
            <!-- Simple CSS shapes for analogy -->
            <div style="width: 40px; height: 40px; border-radius: 50%; background: #0099ff; margin: 0 10px;"></div>
            <span style="font-size: 24px; color: #fff;">+</span>
            <div style="width: 40px; height: 40px; border-radius: 50%; background: #ffff00; margin: 0 10px;"></div>
            <span style="font-size: 24px; color: #fff;">➜</span>
            <div
              style="width: 40px; height: 40px; border-radius: 50%; background: #00ff88; margin: 0 10px; box-shadow: 0 0 20px #00ff88;">
            </div>
          </div>
        </div>

        <div class="workflow-panel">
          <div class="panel-header">
            <h3>Why Elliptic Curves?</h3>
          </div>
          <p class="panel-desc">ECC uses points on a curve equation $y^2 = x^3 + ax + b$. By "adding" points together
            billions of times (scalar multiplication), we create a secure key. It's much efficiently than older methods
            like RSA.</p>
          <ul style="list-style: none; padding: 0; color: rgba(255,255,255,0.8);">
            <li style="margin-bottom: 10px;">✅ <strong> Smaller Keys:</strong> 256-bit ECC = 3072-bit RSA</li>
            <li style="margin-bottom: 10px;">✅ <strong> Faster:</strong> Less computing power needed</li>
            <li>✅ <strong> Secure:</strong> Used in Blockchain & HTTPS</li>
          </ul>
        </div>
      </div>

      <div style="text-align: center;">
        <button class="btn-hero" onclick="showPage('keygen')">Next: Generate Your Key</button>
      </div>
    </div>
  </section>

  <!-- KEY GENERATION PAGE -->
  <section id="keygen" class="page">
    <div class="container">
      <h1 class="section-title">Step 1: Key Generation</h1>

      <div class="sim-canvas-container"
        style="max-width: 100%; height: 600px; margin: 0 auto 40px; position: relative;">
        <h3 class="sim-section-title">Visualizing $P = k \times G$ (3D)</h3>
        <!-- 3D Canvas Container -->
        <div id="keygen-canvas-container" style="width: 100%; height: 100%; border-radius: 16px; overflow: hidden;">
        </div>
      </div>

      <div class="workflow-panel" style="max-width: 800px; margin: 0 auto; text-align: center;">
        <h3>The Math Behind It</h3>
        <p class="panel-desc">
          Your <strong>Private Key ($k$)</strong> is just a random large number.<br>
          Your <strong>Public Key ($P$)</strong> is a point on the curve found by adding the Generator Point ($G$) to
          itself $k$ times.
        </p>
        <div class="keys-display" id="keygen-display" style="display: none;">
          <div class="key-item">
            <label>Private Key (d)</label>
            <div id="priv-key" class="key-value">...</div>
          </div>
          <div class="key-item">
            <label>Public Key (Q)</label>
            <div id="pub-key" class="key-value">...</div>
          </div>
        </div>
        <button class="btn-primary" onclick="generateKeys()">Generate My Keys</button>
      </div>

      <div style="text-align: center; margin-top: 40px;">
        <button class="btn-hero" onclick="showPage('encrypt')">Next: Encrypt a Message</button>
      </div>
    </div>
  </section>

  <!-- ENCRYPTION PAGE -->
  <section id="encrypt" class="page">
    <div class="container">
      <h1 class="section-title">Step 2: Encryption</h1>

      <!-- Shared Canvas Container for this page -->
      <div class="sim-canvas-container"
        style="max-width: 100%; height: 600px; margin: 0 auto 40px; position: relative;">
        <h3 class="sim-section-title">Encryption Simulation (3D)</h3>
        <div id="encrypt-canvas-container" style="width: 100%; height: 100%; border-radius: 16px; overflow: hidden;">
        </div>
      </div>

      <div class="encrypt-workflow">
        <!-- Message Input -->
        <div class="workflow-panel" style="width: 100%; max-width: 600px; margin: 0 auto;">
          <div class="panel-header">
            <div class="step-badge">1</div>
            <h3>Compose Message</h3>
          </div>
          <p class="panel-desc">Enter a message for Alice to send using ECC encryption.</p>
          <input type="text" id="plaintext" class="text-input" placeholder="Type secret message..." value="Hello ECC!"
            spellcheck="false">
          <button class="btn-primary" onclick="startEncryption()" style="width: 100%; margin-top: 15px;">
            Encrypt & Send
          </button>
        </div>
      </div>

      <!-- Results Area (Initially Hidden) -->
      <div title="Results" class="workflow-panel" style="margin-top: 40px;">
        <label class="result-label">Encrypted Output (Ciphertext):</label>
        <textarea id="ciphertext" class="text-output" readonly
          placeholder="Ciphertext will appear here after encryption..."></textarea>
      </div>

      <div style="text-align: center; margin-top: 40px;">
        <button class="btn-hero" onclick="showPage('decrypt')">Next: Decrypt Message</button>
      </div>
    </div>
  </section>

  <!-- DECRYPTION PAGE -->
  <section id="decrypt" class="page">
    <div class="container">
      <h1 class="section-title">Step 3: Decryption</h1>

      <div class="sim-canvas-container"
        style="max-width: 100%; height: 600px; margin: 0 auto 40px; position: relative;">
        <h3 class="sim-section-title">Decryption Simulation (3D)</h3>
        <!-- Canvas will be moved here by JS -->
        <div id="decrypt-canvas-container" style="width: 100%; height: 100%; border-radius: 16px; overflow: hidden;">
        </div>
      </div>

      <div class="encrypt-workflow">
        <!-- Decryption Panel -->
        <div class="workflow-panel" style="width: 100%; max-width: 600px; margin: 0 auto;">
          <div class="panel-header">
            <div class="step-badge">2</div>
            <h3>Decrypt Message</h3>
          </div>
          <p class="panel-desc">Bob uses his private key to calculate the shared secret and recover the message.</p>
          <div style="margin-bottom: 20px;">
            <label class="result-label">Ciphertext to Decrypt:</label>
            <!-- We'll repurpose #ciphertext or create a new display/input if needed, but script.js uses currentCiphertext global -->
            <div id="decrypt-ciphertext-display" class="text-output" style="min-height: 60px;">Wrapper for received
              ciphertext...</div>
          </div>
          <button class="btn-primary" onclick="startDecryption()" style="width: 100%; margin-top: 15px;">
            Decrypt Message
          </button>
        </div>
      </div>

      <div class="workflow-panel" style="margin-top: 40px;">
        <div class="panel-header">
          <h3>Decrypted Result</h3>
        </div>
        <textarea id="decrypted" class="text-output" readonly
          placeholder="Decrypted message appears here..."></textarea>
      </div>

      <!-- Animation Sections (Usually injected dynamically or shown via JS) -->
      <div class="animation-section" id="encryption-section-anim" style="display:none;">
        <!-- kept for script compatibility if needed -->
        <div id="animation-steps"></div>
      </div>
      <div class="animation-section" id="decryption-section" style="display: none; margin-top: 60px;">
        <h2 class="animation-title">Live Decryption Process Simulation</h2>
        <div id="decryption-steps" class="animation-steps"></div>
      </div>

    </div>
  </section>

  <!-- SIMULATION PAGE -->
  <section id="simulation" class="page">
    <div class="container">
      <h1 class="section-title">ECC Algorithm Simulator</h1>
      <p class="simulation-subtitle">Step-by-step visualization of Secp256k1 elliptic curve operations with smooth
        animations</p>

      <!-- Playback Controls -->
      <div class="simulation-controls">
        <button class="control-btn" onclick="simStepBack()" title="Step Backward">
          <span class="control-icon">⏮</span> Previous
        </button>
        <button class="control-btn play-btn" id="play-btn" onclick="simTogglePlay()" title="Play/Pause">
          <span class="control-icon" id="play-icon">▶</span> Play
        </button>
        <button class="control-btn" onclick="simStepForward()" title="Step Forward">
          Next <span class="control-icon">⏭</span>
        </button>
        <button class="control-btn reset-btn" onclick="simReset()" title="Reset Simulation">
          <span class="control-icon">↻</span> Reset
        </button>
        <div class="step-counter">
          <span id="step-num">0</span> / <span id="step-total">0</span>
        </div>
      </div>

      <!-- Main Simulation Area -->
      <div class="simulation-workspace">
        <!-- Left: Curve Visualization -->
        <div class="sim-canvas-container">
          <h3 class="sim-section-title">Secp256k1 Curve: y² = x³ + 7x (mod p)</h3>
          <canvas id="simulation-canvas" class="simulation-canvas"></canvas>
          <div class="curve-legend">
            <div class="legend-item"><span class="legend-dot"
                style="background: rgba(0, 217, 255, 0.8)"></span>Generator (G)</div>
            <div class="legend-item"><span class="legend-dot" style="background: rgba(100, 255, 200, 0.8)"></span>Point
              A</div>
            <div class="legend-item"><span class="legend-dot" style="background: rgba(255, 150, 100, 0.8)"></span>Point
              B</div>
            <div class="legend-item"><span class="legend-dot" style="background: rgba(200, 150, 255, 0.8)"></span>Result
            </div>
          </div>
        </div>

        <!-- Right: Information Panel -->
        <div class="sim-info-container">
          <!-- Operation Selector -->
          <div class="sim-selector">
            <label>Select Operation:</label>
            <select id="operation-select" onchange="simChangeOperation(this.value)" class="operation-select">
              <option value="addition">Point Addition (P + Q)</option>
              <option value="doubling">Point Doubling (2P)</option>
              <option value="multiplication">Scalar Multiplication (k·P)</option>
              <option value="keygen">Key Generation (Alice)</option>
            </select>
          </div>

          <!-- Equations Display -->
          <div class="sim-equations">
            <h4>Mathematical Steps</h4>
            <div id="equations-container" class="equations-list">
              <!-- Populated dynamically -->
            </div>
          </div>

          <!-- Step Description -->
          <div class="sim-description">
            <h4>Current Operation</h4>
            <div id="step-description" class="description-text">
              Select an operation and click Next to begin the simulation.
            </div>
          </div>

          <!-- Coordinates Display -->
          <div class="sim-coords">
            <h4>Point Coordinates</h4>
            <div class="coords-grid">
              <div class="coord-item">
                <label>P:</label>
                <span id="coord-p" class="coord-value">—</span>
              </div>
              <div class="coord-item">
                <label>Q:</label>
                <span id="coord-q" class="coord-value">—</span>
              </div>
              <div class="coord-item">
                <label>Result:</label>
                <span id="coord-result" class="coord-value">—</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Detailed Steps Section -->
      <div class="simulation-details">
        <h3>Detailed Computation Log</h3>
        <div id="computation-log" class="computation-log">
          <!-- Populated dynamically with computation steps -->
        </div>
      </div>
    </div>
  </section>



  <!-- RESOURCES PAGE -->
  <section id="resources" class="page">
    <div class="container">
      <h1 class="section-title">Resources</h1>
      <p class="section-subtitle">Curated materials to deepen your understanding of ECC</p>

      <div class="resources-tabs">
        <button class="tab-btn active" onclick="openTab('videos')">Videos</button>
        <button class="tab-btn" onclick="openTab('tutorials')">Tutorials & Articles</button>
        <button class="tab-btn" onclick="openTab('standards')">Standards</button>
        <button class="tab-btn" onclick="openTab('books')">Books</button>
        <button class="tab-btn" onclick="openTab('research')">Research</button>
        <button class="tab-btn" onclick="openTab('tools')">Tools & Libs</button>
        <button class="tab-btn" onclick="openTab('extras')">Extras</button>
      </div>

      <!-- Videos -->
      <div id="videos" class="resources-content active">
        <div class="resource-card">
          <span class="resource-tag">YouTube</span>
          <h3>Lecture 17: Elliptic Curve Cryptography — Christof Paar</h3>
          <p>A university-level lecture that introduces elliptic curves, the group law, and how ECC is used for ECDH/ECDSA; great as a concise conceptual lecture.</p>
          <a href="https://www.youtube.com/watch?v=zTt4gvuQ6sY" target="_blank" class="resource-link">Watch Video</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">YouTube</span>
          <h3>Introduction to Elliptic Curves — Christof Paar</h3>
          <p>Companion lecture explaining elliptic curves mathematically and visually — helpful if you prefer step-by-step math intuition.</p>
          <a href="https://www.youtube.com/watch?v=vnpZXJL6QCQ" target="_blank" class="resource-link">Watch Video</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">YouTube</span>
          <h3>Elliptic Curve Cryptography Tutorial — Fullstack Academy</h3>
          <p>A practical/visual intro aimed at developers — demonstrates ECC via Diffie–Hellman examples and intuition.</p>
          <a href="https://www.youtube.com/watch?v=JPTfivFVGe8" target="_blank" class="resource-link">Watch Video</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">YouTube</span>
          <h3>Dan Boneh / Stanford — Talks & seminars on ECC and pairings</h3>
          <p>Advanced talks (pairings, history, research trends) from Dan Boneh and invited speakers — excellent for more advanced or research-oriented context.</p>
          <a href="https://www.youtube.com/watch?v=uFPA3cGZE1A" target="_blank" class="resource-link">Watch Video</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">YouTube</span>
          <h3>Elliptic Curve Cryptography — Alfred Menezes</h3>
          <p>Multi-part lecture series by a co-author of ECC textbooks — practical and crypto-standards-aware.</p>
          <a href="https://www.youtube.com/watch?v=LdYtsMyPnyc" target="_blank" class="resource-link">Watch Video</a>
        </div>
      </div>

      <!-- Tutorials -->
      <div id="tutorials" class="resources-content">
        <div class="resource-card">
          <span class="resource-tag">Wikipedia</span>
          <h3>Elliptic-curve cryptography — Wikipedia</h3>
          <p>Broad overview, history, algorithms (ECDSA, ECDH), common curves and references — good starting map.</p>
          <a href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography" target="_blank" class="resource-link">Read Article</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Splunk</span>
          <h3>Elliptic Curve Cryptography — Splunk Learn article</h3>
          <p>A developer-friendly walkthrough of ECC concepts, motivations, and common application areas.</p>
          <a href="https://www.splunk.com/en_us/blog/learn/elliptic-curve-cryptography.html" target="_blank" class="resource-link">Read Article</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">PDF</span>
          <h3>Elliptic Curve Cryptography — Implementation Tutorial (Anoop MS)</h3>
          <p>Implementation-focused PDF describing fields (prime, binary), point operations, ECDSA/ECDH examples — useful if you implement ECC.</p>
          <a href="https://informatika.stei.itb.ac.id/~rinaldi.munir/Kriptografi/2014-2015/ECC_Tut_v1_0.pdf" target="_blank" class="resource-link">Download PDF</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">PDF</span>
          <h3>Elliptic Curve Cryptography (course notes / Saylor)</h3>
          <p>Condensed course notes / PDF useful for study and reference.</p>
          <a href="https://resources.saylor.org/wwwresources/archived/site/wp-content/uploads/2012/07/Elliptic-curve-cryptography.pdf" target="_blank" class="resource-link">Download PDF</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">StackExchange</span>
          <h3>Crypto StackExchange thread — What math to learn for ECC</h3>
          <p>Practical advice from researchers/practitioners about the math background needed for ECC research or implementation.</p>
          <a href="https://crypto.stackexchange.com/questions/62788/what-math-should-i-learn-to-get-in-depth-with-elliptic-curve-cryptography-resear" target="_blank" class="resource-link">Read Thread</a>
        </div>
      </div>

      <!-- Standards -->
      <div id="standards" class="resources-content">
        <div class="resource-card">
          <span class="resource-tag">NIST</span>
          <h3>NIST SP 800-186: Recommendations for Discrete Logarithm-Based Cryptography</h3>
          <p>Official NIST recommendation that specifies recommended curves, domain parameter guidance, and representation/operations for ECC. Essential for production/standards compliance.</p>
          <a href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-186.pdf" target="_blank" class="resource-link">Download PDF</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">SECG</span>
          <h3>SEC 1: Elliptic Curve Cryptography</h3>
          <p>One of the long-standing technical standards describing key formats, ECDSA/ECDH schemes, and data representations for ECC. Use when interoperating with many libraries.</p>
          <a href="https://www.secg.org/sec1-v2.pdf" target="_blank" class="resource-link">Download PDF</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">RFC</span>
          <h3>RFC / test vectors & related documents for ECC</h3>
          <p>Useful for verifying implementations with canonical test vectors and interoperability checks.</p>
          <a href="https://rfc.nop.hu/secg/gec2.pdf" target="_blank" class="resource-link">Download PDF</a>
        </div>
      </div>

      <!-- Books -->
      <div id="books" class="resources-content">
        <div class="resource-card">
          <span class="resource-tag">Book/PDF</span>
          <h3>Guide to Elliptic Curve Cryptography</h3>
          <p>Classic textbook covering math, algorithms, implementation issues, and standards references; highly recommended as a deep reference.</p>
          <a href="https://tomlr.free.fr/Math%EF%BF%BDmatiques/Math%20Complete/Cryptography/Guide%20to%20Elliptic%20Curve%20Cryptography%20-%20D.%20Hankerson%2C%20A.%20Menezes%2C%20S.%20Vanstone.pdf" target="_blank" class="resource-link">Download PDF</a>
        </div>
      </div>

      <!-- Research -->
      <div id="research" class="resources-content">
        <div class="resource-card">
          <span class="resource-tag">Analysis</span>
          <h3>SafeCurves</h3>
          <p>A thorough, security-oriented evaluation of many curves and explicit criteria for "safe" curves; useful when choosing or critiquing curve parameters.</p>
          <a href="https://safecurves.cr.yp.to/" target="_blank" class="resource-link">Visit Site</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Paper</span>
          <h3>BADA55 (How to manipulate curve standards)</h3>
          <p>Important critical paper showing how standard curves might have weaknesses or subtle manipulation — essential reading for security-aware engineers.</p>
          <a href="https://cr.yp.to/papers.html#bada55" target="_blank" class="resource-link">Read Paper</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Research</span>
          <h3>Selected IACR / ePrint papers and workshop pages</h3>
          <p>For cutting-edge ECC research (attacks, side-channel, protocols, pairings), search IACR / ePrint archives and ECC workshop proceedings.</p>
          <a href="https://eccworkshop.org/2025/" target="_blank" class="resource-link">Visit Workshop</a>
        </div>
      </div>

      <!-- Tools -->
      <div id="tools" class="resources-content">
        <div class="resource-card">
          <span class="resource-tag">OpenSSL</span>
          <h3>OpenSSL: EC / openssl-ec manual pages</h3>
          <p>Official OpenSSL docs for EC commands and usage (key generation, conversions, formats). Practical CLI + API examples.</p>
          <a href="https://docs.openssl.org/3.1/man1/openssl-ec/" target="_blank" class="resource-link">Read Docs</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Libsodium</span>
          <h3>Libsodium / Sodium</h3>
          <p>Practical, modern crypto library docs for Curve25519/X25519 and Ed25519 (signatures and key exchange). Good for secure-by-default implementation choices.</p>
          <a href="https://libsodium.gitbook.io/doc/advanced/ed25519-curve25519" target="_blank" class="resource-link">Read Docs</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Grokipedia</span>
          <h3>Curve25519 background & specification</h3>
          <p>Practical explanations of the Curve25519 parameters and why it's efficient and secure in many contexts.</p>
          <a href="https://grokipedia.com/page/Curve25519" target="_blank" class="resource-link">Read Article</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Guide</span>
          <h3>Practical OpenSSL ECC guides</h3>
          <p>Community tutorials showing openssl commands for generating EC keys, ECDSA, certificates, etc. Useful for hands-on testing.</p>
          <a href="https://www.scottbrady.io/openssl/creating-elliptical-curve-keys-using-openssl" target="_blank" class="resource-link">Read Guide</a>
        </div>
      </div>

      <!-- Extras -->
      <div id="extras" class="resources-content">
        <div class="resource-card">
          <span class="resource-tag">Wikipedia</span>
          <h3>Counting points / Schoof’s algorithm</h3>
          <p>If you need the math for curve order/counting and algorithms used in parameter selection. Good to read once you want to go deeper into number-theoretic parts.</p>
          <a href="https://en.wikipedia.org/wiki/Schoof%27s_algorithm" target="_blank" class="resource-link">Read Article</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Docs</span>
          <h3>Rackspace / CLI quick reference for EC operations</h3>
          <p>Quick command-line operations for EC keys and conversions — practical cheat-sheet.</p>
          <a href="https://docs.rackspace.com/docs/elliptic-curve-operations" target="_blank" class="resource-link">Read Docs</a>
        </div>
        <div class="resource-card">
          <span class="resource-tag">Wikipedia</span>
          <h3>ECDSA (algorithm reference)</h3>
          <p>Algorithm description for ECDSA signatures, common pitfalls, and references for implementation.</p>
          <a href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm" target="_blank" class="resource-link">Read Article</a>
        </div>
      </div>
    </div>
  </section>

  <!-- TEAM PAGE -->
  <section id="team" class="page" role="region" aria-labelledby="team-title">
    <div class="container">
      <h1 id="team-title" class="section-title team-section-title">Our Team</h1>

      <div class="team-grid">
        <article class="team-card" tabindex="0">
          <div class="team-avatar" aria-hidden="true">NR</div>
          <h3 class="team-name">Nour Ragab</h3>
        </article>

       

        <article class="team-card" tabindex="0">
          <div class="team-avatar" aria-hidden="true">SE</div>
          <h3 class="team-name">Shaimaa Eshra</h3>
        </article>

        <article class="team-card" tabindex="0">
          <div class="team-avatar" aria-hidden="true">AH</div>
          <h3 class="team-name">Aya Hady</h3>
        </article>
        
         <article class="team-card" tabindex="0">
          <div class="team-avatar" aria-hidden="true">JA</div>
          <h3 class="team-name">Jana Amir</h3>
        </article>

        <article class="team-card" tabindex="0">
          <div class="team-avatar" aria-hidden="true">SA</div>
          <h3 class="team-name">Shahd Azzam</h3>
        </article>
      </div>

      <div class="team-mission">
        <h2>Our Mission</h2>
        <p>To make advanced ECC accessible, understandable, and interactive for everyone.</p>
      </div>
    </div>
  </section>

  <script>
// Global state
let currentPrivateKey = null
let currentPublicKey = null
let currentCiphertext = null
let bgAnimationEnabled = true

// 3D Scene Managers
const scenes = {
  hero: null,
  keygen: null,
  encrypt: null,
  decrypt: null
};

// Helper: Sleep function for animations
const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

// ============ PAGE NAVIGATION ============
function showPage(pageName) {
  const pages = document.querySelectorAll(".page")
  const navLinks = document.querySelectorAll(".nav-link")

  pages.forEach((page) => page.classList.remove("active"))
  navLinks.forEach((link) => link.classList.remove("active"))

  document.getElementById(pageName).classList.add("active")

  // Find the link that corresponds to this page
  const activeLink = Array.from(navLinks).find(link => link.getAttribute('onclick').includes(pageName));
  if (activeLink) activeLink.classList.add("active");

  // Initialize specific 3D scenes when entering pages
  setTimeout(() => {
    if (pageName === "home") initHeroScene();
    if (pageName === "keygen") initKeyGenScene();
    if (pageName === "encrypt") initEncryptScene();
    if (pageName === "decrypt") initDecryptScene();
  }, 100);
}

// ============ BACKGROUND TOGGLE ============
document.addEventListener('DOMContentLoaded', () => {
  const toggleBtn = document.getElementById("bg-toggle");
  if (toggleBtn) {
    toggleBtn.addEventListener("click", () => {
      bgAnimationEnabled = !bgAnimationEnabled;
      toggleBtn.classList.toggle("disabled");
      toggleBtn.style.opacity = bgAnimationEnabled ? "1" : "0.5";
    });
  }
  // Start Hero initially
  initHeroScene();
});

// ============ 3D SCENE CLASS ============
class ECCScene3D {
  constructor(containerId, colorTheme = 0x00d9ff) {
    this.container = document.getElementById(containerId);
    if (!this.container) return;

    this.width = this.container.clientWidth;
    this.height = this.container.clientHeight;
    this.theme = colorTheme;
    this.labels = [];

    // Scene
    this.scene = new THREE.Scene();
    this.scene.fog = new THREE.FogExp2(0x0a0f1e, 0.02);

    // Camera
    this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 1000);
    this.camera.position.z = 12;
    this.camera.position.y = 0;

    // Renderer
    this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    this.renderer.setSize(this.width, this.height);
    this.renderer.setPixelRatio(window.devicePixelRatio);
    this.container.innerHTML = ''; // Clear previous
    this.container.appendChild(this.renderer.domElement);

    // Lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    this.scene.add(ambientLight);
    const pointLight = new THREE.PointLight(this.theme, 2, 50);
    pointLight.position.set(5, 5, 10);
    this.scene.add(pointLight);

    // Groups
    this.curveGroup = new THREE.Group();
    this.scene.add(this.curveGroup);
    this.elementsGroup = new THREE.Group();
    this.scene.add(this.elementsGroup);

    // Interaction vars
    this.mouseX = 0;
    this.mouseY = 0;
    this.targetRotationX = 0;
    this.targetRotationY = 0;

    window.addEventListener('resize', () => this.onResize());
    this.container.addEventListener('mousemove', (e) => this.onMouseMove(e));

    this.initCurve();
    this.animate = this.animate.bind(this);
    this.animate();
  }

  onResize() {
    if (!this.container) return;
    this.width = this.container.clientWidth;
    this.height = this.container.clientHeight;
    this.camera.aspect = this.width / this.height;
    this.camera.updateProjectionMatrix();
    this.renderer.setSize(this.width, this.height);
  }

  onMouseMove(event) {
    const rect = this.container.getBoundingClientRect();
    this.mouseX = ((event.clientX - rect.left) / this.width) * 2 - 1;
    this.mouseY = -((event.clientY - rect.top) / this.height) * 2 + 1;
  }

  initCurve() {
    // Draw ECC curve y^2 = x^3 + 7
    const points = [];
    const scale = 1.5;
    // We draw two segments: y > 0 and y < 0
    const topPoints = [];
    const botPoints = [];
    for (let x = -1.9; x <= 4; x += 0.05) {
      const y2 = Math.pow(x, 3) + 7;
      if (y2 >= 0) {
        const y = Math.sqrt(y2);
        topPoints.push(new THREE.Vector3(x * scale, y * scale, 0));
        botPoints.push(new THREE.Vector3(x * scale, -y * scale, 0));
      }
    }

    const material = new THREE.LineBasicMaterial({ color: this.theme, transparent: true, opacity: 0.6, linewidth: 2 });

    const topGeo = new THREE.BufferGeometry().setFromPoints(topPoints);
    const botGeo = new THREE.BufferGeometry().setFromPoints(botPoints);

    this.curveGroup.add(new THREE.Line(topGeo, material));
    this.curveGroup.add(new THREE.Line(botGeo, material));

    // Grid
    const gridHelper = new THREE.GridHelper(30, 30, 0x333333, 0x111111);
    gridHelper.rotation.x = Math.PI / 2;
    gridHelper.position.z = -1;
    this.scene.add(gridHelper);
  }

  addPoint(x, y, color = 0xffffff, scale = 1) {
    const geometry = new THREE.SphereGeometry(0.3 * scale, 32, 32);
    const material = new THREE.MeshPhongMaterial({ color: color, emissive: color, emissiveIntensity: 0.6 });
    const sphere = new THREE.Mesh(geometry, material);
    sphere.position.set(x, y, 0);
    this.elementsGroup.add(sphere);

    // Pulse animation data
    sphere.userData = { initialScale: scale, time: Math.random() * 100 };
    return sphere;
  }

  // Create a floating HTML label
  addLabel(text, position, color = '#ffffff') {
    const labelDiv = document.createElement('div');
    labelDiv.className = 'scene-label';
    labelDiv.textContent = text;
    labelDiv.style.color = color;
    labelDiv.style.position = 'absolute';
    labelDiv.style.padding = '4px 8px';
    labelDiv.style.background = 'rgba(0,0,0,0.7)';
    labelDiv.style.borderRadius = '4px';
    labelDiv.style.fontSize = '12px';
    labelDiv.style.pointerEvents = 'none';
    labelDiv.style.border = `1px solid ${color}`;


    this.container.appendChild(labelDiv);
    this.labels.push({ div: labelDiv, position: position });
    return labelDiv;
  }

  updateLabels() {
    this.labels.forEach(label => {
      const pos = label.position.clone();
      // Project 3D position to 2D screen
      pos.project(this.camera);
      // Convert to CSS coordinates
      const x = (pos.x * .5 + .5) * this.width;
      const y = (pos.y * -.5 + .5) * this.height;

      label.div.style.left = `${x}px`;
      label.div.style.top = `${y}px`;


      // Fade out if behind camera or far
      if (pos.z > 1) label.div.style.opacity = 0;
      else label.div.style.opacity = 1;
    });
  }

  clearElements() {
    // Remove all children from elements group
    while (this.elementsGroup.children.length > 0) {
      const child = this.elementsGroup.children[0];
      if (child.geometry) child.geometry.dispose();
      this.elementsGroup.remove(child);
    }
    // Remove labels
    this.labels.forEach(l => l.div.remove());
    this.labels = [];
  }

  // New Animation: Trace a path between two points
  async tracePath(start, end, color = 0xffffff) {
    const points = [];
    points.push(start);
    // Create detailed cubic bezier or simple line
    // Simple lerp for now
    const curve = new THREE.LineCurve3(start, end);
    const geometry = new THREE.TubeGeometry(curve, 20, 0.05, 8, false);
    const material = new THREE.MeshBasicMaterial({ color: color, transparent: true, opacity: 0 });
    const mesh = new THREE.Mesh(geometry, material);
    this.elementsGroup.add(mesh);

    // Animate opacity
    for (let i = 0; i <= 20; i++) {
      material.opacity = i / 20;
      await sleep(20);
    }
    return mesh;
  }

  animate() {
    requestAnimationFrame(this.animate);

    // Camera slight movement
    this.targetRotationX = this.mouseX * 0.3;
    this.targetRotationY = this.mouseY * 0.3;

    this.camera.position.x += (this.mouseX * 5 - this.camera.position.x) * 0.05;
    this.camera.position.y += (this.mouseY * 2 - this.camera.position.y) * 0.05;
    this.camera.lookAt(new THREE.Vector3(0, 0, 0));

    this.elementsGroup.children.forEach(mesh => {
      if (mesh.userData && mesh.userData.time !== undefined) {
        mesh.userData.time += 0.05;
        const s = mesh.userData.initialScale + Math.sin(mesh.userData.time) * 0.1;
        mesh.scale.set(s, s, s);
      }
    });

    this.updateLabels();
    this.renderer.render(this.scene, this.camera);
  }
}

// ============ SPECIFIC SCENE INIT ============

function initHeroScene() {
  if (scenes.hero) return;
  const container = document.getElementById("hero-3d-container");
  if (!container) return;

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
  camera.position.z = 25;

  const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  container.appendChild(renderer.domElement);

  // Particles
  const particlesGeometry = new THREE.BufferGeometry();
  const count = 3000;
  const posArray = new Float32Array(count * 3);
  const colorsArray = new Float32Array(count * 3);

  for (let i = 0; i < count * 3; i += 3) {
    const r = Math.random() * 25;
    const theta = Math.random() * 2 * Math.PI;
    posArray[i] = r * Math.cos(theta);
    posArray[i + 1] = (Math.random() - 0.5) * 5 + Math.sin(r * 0.5) * 2;
    posArray[i + 2] = r * Math.sin(theta);

    colorsArray[i] = 0.0;
    colorsArray[i + 1] = 0.5 + Math.random() * 0.5;
    colorsArray[i + 2] = 1.0;
  }

  particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
  particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colorsArray, 3));

  const material = new THREE.PointsMaterial({
    size: 0.15,
    vertexColors: true,
    transparent: true,
    opacity: 0.8,
    blending: THREE.AdditiveBlending
  });

  const particlesMesh = new THREE.Points(particlesGeometry, material);
  scene.add(particlesMesh);

  // Interaction
  let mouseX = 0;
  let mouseY = 0;
  document.addEventListener('mousemove', (event) => {
    mouseX = (event.clientX / window.innerWidth) * 2 - 1;
    mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
  });

  function animate() {
    if (!bgAnimationEnabled) return;
    requestAnimationFrame(animate);
    particlesMesh.rotation.y += 0.001 + mouseX * 0.002;
    particlesMesh.rotation.x += mouseY * 0.002;
    renderer.render(scene, camera);
  }
  animate();
  scenes.hero = { scene, renderer };
}

function initKeyGenScene() {
  // Only init if empty
  const container = document.getElementById("keygen-canvas-container");
  if (container && container.children.length === 0) {
    scenes.keygen = new ECCScene3D("keygen-canvas-container", 0x00ff88);
    scenes.keygen.camera.position.z = 10;
    // Draw initial static Curve if needed or just wait for generation
  }
}

function initEncryptScene() {
  const container = document.getElementById("encrypt-canvas-container");
  if (container && container.children.length === 0) {
    scenes.encrypt = new ECCScene3D("encrypt-canvas-container", 0xff00ff);
    scenes.encrypt.camera.position.z = 10;
  }
}

function initDecryptScene() {
  const container = document.getElementById("decrypt-canvas-container");
  if (container && container.children.length === 0) {
    scenes.decrypt = new ECCScene3D("decrypt-canvas-container", 0xffaa00);
    scenes.decrypt.camera.position.z = 10;
  }
}

// ============ LOGIC AND ANIMATION FLOWS ============

// --- KEY GENERATION FLOW ---
async function generateKeys() {
  const scene = scenes.keygen;
  if (!scene) return;
  scene.clearElements();

  try {
    // Step 1: Visual - Key Generation Start
    scene.addLabel("Step 1: Selecting Generator Point G", new THREE.Vector3(0, 4, 0), "#00d9ff");
    const G = scene.addPoint(-2, -1.5, 0x00d9ff, 1); // Generator
    scene.addLabel("G", new THREE.Vector3(-2, -2.2, 0), "#00d9ff");
    await sleep(1500);

    // Step 2: Call Backend
    const response = await fetch("/generate_keys", { method: "POST" });
    const data = await response.json();
    currentPrivateKey = data.private_key;
    currentPublicKey = data.public_key;

    // Visual - Private Key Selection
    scene.clearElements();
    scene.addPoint(-2, -1.5, 0x00d9ff, 1); // Redraw sum
    scene.addLabel("G", new THREE.Vector3(-2, -2.2, 0), "#00d9ff");

    scene.addLabel("Step 2: Private Key (k) selected", new THREE.Vector3(0, 4, 0), "#ffffff");
    await sleep(1500);

    // Step 3: Animation of Scalar Multiplication
    scene.addLabel("Step 3: Computing P = k * G", new THREE.Vector3(0, 3, 0), "#00ff88");

    let currentPos = new THREE.Vector3(-2, -1.5, 0);
    for (let i = 0; i < 8; i++) {
      // Random "hop" on the curve
      const nextX = (Math.random() * 5) - 2.5;
      const nextY = (Math.random() > 0.5 ? 1 : -1) * Math.sqrt(Math.pow(nextX, 3) + 7) * 1.5; // Scale match
      const nextPos = new THREE.Vector3(nextX, nextY, 0);

      // Trace line
      await scene.tracePath(currentPos, nextPos, 0x00ff88);
      const p = scene.addPoint(nextPos.x, nextPos.y, 0x00ff88, 0.5);
      currentPos = nextPos;
      await sleep(300);
      if (i < 7) scene.elementsGroup.remove(p); // Remove intermediate points, keep path
    }

    // Final Point
    scene.addLabel("Step 4: Public Key Generated!", new THREE.Vector3(0, 5, 0), "#00ff88");
    const pubKeyPoint = scene.addPoint(currentPos.x, currentPos.y, 0xffffff, 1.5);
    scene.addLabel("Public Key (P)", new THREE.Vector3(currentPos.x, currentPos.y - 0.8, 0), "#ffffff");

    // Update UI
    document.getElementById("priv-key").textContent = currentPrivateKey.substring(0, 30) + "...";
    document.getElementById("pub-key").textContent = currentPublicKey.substring(0, 30) + "...";
    document.getElementById("keygen-display").style.display = "block";

  } catch (e) {
    console.error(e);
    alert("Key Generation Failed");
  }
}

// --- ENCRYPTION FLOW ---
async function startEncryption() {
  const plaintext = document.getElementById("plaintext").value.trim()
  if (!plaintext || !currentPublicKey) {
    alert("Please enter message and generate keys.");
    return;
  }
  showPage('encrypt');

  const scene = scenes.encrypt;
  if (!scene) return;
  scene.clearElements();

  // Step 1: Map Message to Point
  scene.addLabel("Step 1: Mapping Message to Curve Point (M)", new THREE.Vector3(0, 4, 0), "#ff00ff");
  const M = scene.addPoint(-1, 2, 0xff00ff, 1.2);
  scene.addLabel("Message (M)", new THREE.Vector3(-1, 1.3, 0), "#ff00ff");
  await sleep(2000);

  // Step 2: Receiver's Public Key
  scene.addLabel("Step 2: Retrieve Public Key (P)", new THREE.Vector3(0, 4, 0), "#00d9ff");
  const P = scene.addPoint(3, -2, 0x00d9ff, 1);
  scene.addLabel("Public Key (P)", new THREE.Vector3(3, -2.8, 0), "#00d9ff");
  await sleep(2000);

  // Step 3: Generate Ephemeral Key k and C1
  scene.addLabel("Step 3: Generate Random k & Calculate C1 = k*G", new THREE.Vector3(0, 4, 0), "#ffffff");
  const G = scene.addPoint(-2, -1.5, 0xaaaaaa, 0.8); // G reference
  scene.addLabel("G", new THREE.Vector3(-2, -2.2, 0), "#aaaaaa");

  // Animate path G -> C1
  const C1_pos = new THREE.Vector3(-3, 1, 0);
  await scene.tracePath(G.position, C1_pos, 0xffffff);
  const C1 = scene.addPoint(C1_pos.x, C1_pos.y, 0xffffff, 1);
  scene.addLabel("C1", new THREE.Vector3(C1_pos.x, C1_pos.y + 0.5, 0), "#ffffff");
  await sleep(2000);

  // Step 4: Calculate Shared Secret S
  scene.addLabel("Step 4: Calculate Shared Secret S = k*P", new THREE.Vector3(0, 4, 0), "#ffff00");
  const S_pos = new THREE.Vector3(1, -1, 0); // Hypothetical S
  await scene.tracePath(P.position, S_pos, 0xffff00);
  const S = scene.addPoint(S_pos.x, S_pos.y, 0xffff00, 0.8);
  scene.addLabel("Secret S", new THREE.Vector3(1, -1.6, 0), "#ffff00");
  await sleep(2000);

  // Step 5: Encrypt M -> C2
  scene.addLabel("Step 5: Encrypt M: C2 = M + S", new THREE.Vector3(0, 4, 0), "#ff00ff");
  // Move S and M towards each other to form C2
  const C2_pos = new THREE.Vector3(2, 2, 0);

  await Promise.all([
    scene.tracePath(M.position, C2_pos, 0xff00ff),
    scene.tracePath(S.position, C2_pos, 0xffff00)
  ]);

  scene.elementsGroup.remove(M);
  scene.elementsGroup.remove(S);
  const C2 = scene.addPoint(C2_pos.x, C2_pos.y, 0xff00ff, 1.5); // Cipher point
  scene.addLabel("C2 (Encrypted)", new THREE.Vector3(C2_pos.x, C2_pos.y + 0.6, 0), "#ff00ff");
  await sleep(1500);

  // Do actual API call
  try {
    const response = await fetch("/encrypt", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ plaintext, public_key: currentPublicKey }),
    });
    const data = await response.json();
    currentCiphertext = data.ciphertext;
    document.getElementById("ciphertext").value = currentCiphertext;
    document.getElementById("ciphertext").parentElement.style.opacity = "1";

    scene.addLabel("Encryption Complete! (C1, C2) sent.", new THREE.Vector3(0, 5, 0), "#00ff88");

  } catch (e) {
    alert("Encryption Error");
  }
}

// --- DECRYPTION FLOW ---
async function startDecryption() {
  if (!currentCiphertext || !currentPrivateKey) {
    alert("No ciphertext or private key found.");
    return;
  }

  const scene = scenes.decrypt;
  if (!scene) return;
  scene.clearElements();

  // Show C1 and C2
  scene.addLabel("Step 1: Received Ciphertext (C1, C2)", new THREE.Vector3(0, 4, 0), "#ffffff");
  const C1_pos = new THREE.Vector3(-3, 1, 0);
  const C2_pos = new THREE.Vector3(2, 2, 0);

  const C1 = scene.addPoint(C1_pos.x, C1_pos.y, 0xffffff, 1);
  scene.addLabel("C1", new THREE.Vector3(C1_pos.x, C1_pos.y + 0.6, 0), "#ffffff");

  const C2 = scene.addPoint(C2_pos.x, C2_pos.y, 0xff00ff, 1.3);
  scene.addLabel("C2", new THREE.Vector3(C2_pos.x, C2_pos.y + 0.6, 0), "#ff00ff");
  await sleep(2000);

  // Compute S from C1
  scene.addLabel("Step 2: Compute Secret S = d * C1", new THREE.Vector3(0, 4, 0), "#ffff00");
  const S_pos = new THREE.Vector3(1, -1, 0);
  await scene.tracePath(C1_pos, S_pos, 0xffff00);
  const S = scene.addPoint(S_pos.x, S_pos.y, 0xffff00, 1);
  scene.addLabel("Secret S", new THREE.Vector3(S_pos.x, S_pos.y - 0.6, 0), "#ffff00");
  await sleep(2000);

  // Decrypt C2 -> M
  scene.addLabel("Step 3: Decrypt M = C2 - S", new THREE.Vector3(0, 4, 0), "#00ff88");
  const M_pos = new THREE.Vector3(-1, 2, 0); // Original Message pos

  await scene.tracePath(C2_pos, M_pos, 0xff00ff);
  await scene.tracePath(S_pos, M_pos, 0xffff00); // Inverse addition visual

  scene.elementsGroup.remove(C2);
  scene.elementsGroup.remove(S);

  const M = scene.addPoint(M_pos.x, M_pos.y, 0x00ff88, 1.5);
  scene.addLabel("Decrypted Message (M)", new THREE.Vector3(M_pos.x, M_pos.y + 0.6, 0), "#00ff88");
  await sleep(1500);

  // API Call
  try {
    const response = await fetch("/decrypt", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ ciphertext: currentCiphertext, private_key: currentPrivateKey }),
    });
    const data = await response.json();
    document.getElementById("decrypted").value = data.plaintext;

    scene.addLabel("Decryption Successful!", new THREE.Vector3(0, 5, 0), "#00ff88");

  } catch (e) {
    alert("Decryption failed");
  }
}

// Resources Tabs
function openTab(tabName) {
  const contents = document.querySelectorAll('.resources-content');
  const buttons = document.querySelectorAll('.tab-btn');

  contents.forEach(content => content.classList.remove('active'));
  buttons.forEach(btn => btn.classList.remove('active'));

  document.getElementById(tabName).classList.add('active');
  // Find the button that calls this function
  const activeBtn = Array.from(buttons).find(btn => btn.getAttribute('onclick').includes(tabName));
  if (activeBtn) activeBtn.classList.add('active');
}
</script>
</body>

</html>